# 2.4 IP 주소

## IP 주소

---

- 인터넷 계층에서 사용

## ARP(Address Resolution Protocol)

---

- 컴퓨터와 컴퓨터 간의 통신은 IP 주소에서 ARP를  통해 MAC 주소를 찾아 MAC 주소를 기반으로 통신함
- **ARP**
    - 주소 결정 프로토콜
    - IP 주소로부터 MAC 주소를 구함
    - IP와 MAC 주소의 다리 역할
- ARP를 통해 IP(가상) 주소를 MAC(실제) 주소로 변환
- RARP(Reverse)를 통해  MAC(실제) 주소를  IP(가상) 주소로 변환할 수 있음

- **브로드캐스트**: 송신 호스트가 전송한 데이터가 네트워크에 연결된 모든 호스트에 전송되는 방식
- **유니캐스트**: 고유 주소로 식별된 하나의 네트워크 목적지에 1:1로 데이터를 전송하는 방식

## 홉바이홉 통신

---

- 홉바이홉 통신: IP주소를 통해 통신하는 과정
- 홉(hop): 건너뛰는 모습, 통신망에서 각 패킷이 여러 개의 라우터를 건너가는 모습을 비유
- 수많은 서브네트워크 안에 있는 라우터의 라우팅 테이블을 IP를 기반으로 전달해나가며 라우팅을 수행, 최종 목적지까지 패킷 전달
    
    ![image.png](./2.4%20IP%20주소/image.png)
    
- **라우팅**: IP 주소를 찾아가는 과정

### 라우팅 테이블

- 송신지에서 수신지까지 도달하기 위해 사용
- 라우터에 들어가 있는 목적지 정보, 목적지로 가기 위한 방법이 들어 있는 리스트
- 라우팅 테이블은 게이트웨이와 모든 목적지에 대해 해당 목적지에 도달하기 위해 거쳐야 하는 다음 라우터의 정보를 가지고 있음

### 게이트웨이

- 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 관문 역할의 컴퓨터, 소프트웨어
- 사용자가 인터넷에 접속할 때 수많은 톨게이트인 게이트웨이를 거침
- 게이트웨이는 서로 다른 네트워크 상의 통신 프로토콜을 변환해주는 역할을 하기도 함

## IP 주소 체계

---

- IP 주소는 IPv4, IPv6로 나뉨
- **IPv4**: 32비트를 8비트 단위로 점을 찍어 표현(123.45.67.89)
- **IPv6**: 64비트를 16비트 단위로 점을 찍어 표현(2001:db8:ff00:42:8329)
- IPv6로 추세가 변하고 있지만 현재는 IPv4 체계를 주로 사용

### 클래스 기반 할당 방식

- IP 주소 체계는 발전하는 중
- 처음에는 클래스 기반 할당 방식(classful network addressing) 사용
- A, B, C, D, E 다섯 개의 클래스로 구분
- 앞에 있는 부분을 네트워크 주소, 그 뒤에 있는 부분을 호스트 주소로 놓아 사용
- 호스트 주소: 컴퓨터에 부여하는 주소

![image.png](./2.4%20IP%20주소/image%201.png)

- 클래스 A, B, C: 일대일 통신으로 사용
- 클래스 D: 멀티캐스트 통신
    - 네트워크에 속해 있는 모든 컴퓨터에 데이터를 보낼 때 사용
- 클래스 E: 예비용

![image.png](./2.4%20IP%20주소/image%202.png)

- 구분 비트: 맨 왼쪽에 있는 비트
    - A는 0, B는 10, C는 110
- 구분 비트를 통해 클래스 간의 IP가 나뉘어짐
- 범위: A(0.0.0.0 ~ 127.255.255.255), B(128.0.0.0 ~ 191.255.255.25) …

![image.png](./2.4%20IP%20주소/image%203.png)

- 클래스 A로 12.0.0.0이라는 네트워크를 부여받은 경우
    - **구별 주소**: 12.0.0.0
    - **호스트 주소**: 12.0.0.1 ~ 12.255.255.254
    - **브로드캐스트 주소**: 12.255.255.255

- 단점: 사용하는 주소보다 버리는 주소가 많음 → DHCP, IPv6, NAT으로 해소

### DHCP(Dynamic Host Configuration Protocol)

---

- IP 주소 및 기타 통신 매개변수를 자동으로 할당하기 위한 네트워크 관리 프로토콜
- 네트워크 장치의 IP 주소를 수동으로 설정할 필요 없이 인터넷에 접속할 때마다 자동으로 IP 주소를 할당할 수 있음
- 많은 라우터, 게이트웨이 장비에 DHCP 기능이 있음
- 대부분의 가정용 네트워크에서 IP 주소 할당

### NAT(Network Address Translation)

---

- 패킷이 라우팅 장치를 통해 전송되는 동안 패킷의 IP 주소 정보를 수정하여 IP 주소를 다른 주소로 매핑하는 방법
- IPv4 주소 체계만으로 많은 주소를 감당할 수 없음
    - NAT로 공인 IP, 사설 IP로 나누어 많은 주소를 처리할 수 있음
- ICS, RRAS, Netfilter 소프트웨어를 통해 NAT 가능

![image.png](./2.4%20IP%20주소/image%204.png)

- 여러 개의 사설 IP를 NAT을 사용해 하나의 공인 IP로 묶어 외부 인터넷에 요청할 수 있음
- NAT 장치를 통해 사설 IP ↔ 공인 IP 변환 가능

- 공유기와 NAT
    - NAT을 쓰는 이유: 주로 여러 대의 호스트가 하나의 공인 IP 주소를 사용하여 인터넷에 접속하기 위함
    - 인터넷 공유기에 NAT 기능이 탑재되어 있기 때문에 인터넷 회선 하나를 개통하고 공유기를 달아 여러 PC를 연결하여 사용할 수 있음

- NAT를 이용한 보안
    - 내부 네트워크에서 이용하는 IP 주소와 외부에 드러나는 IP 주소가 다르므로 내부 네트워크에 대해 어느 정도 보안이 가능함

- NAT의 단점
    - 여러 명이 동시에 인터넷을 접속하게 되므로 실제로 접속하는 호스트 숫자에 따라 접속 속도가 느려질 수 있음

## IP 주소를 이용한 위치 정보



- IP 주소는 인터넷에서 사용하는 네트워크 주소이기 때문에 동, 구까지 위치 추적이 가능함

## 예상 질문

---

- ARP의 역할 대해 설명해 주세요.
- NAT의 역할과 장단점에 대해 설명해 주세요.
- IP 주소 체계에 대해 설명해 주세요.
- 브로드캐스트와 유니캐스트에 대해 설명해 주세요.