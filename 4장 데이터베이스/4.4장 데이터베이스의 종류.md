## 관계형 데이터베이스 (RDBMS)
행과 열을 가지는 표 형식 데이터를 저장하는 형태의 데이터베이스이며, SQL을 통해 조작할 수 있다.

MySQL, PostgreSQL, 오라클, SQL Server, MSSQL 등이 RDBMS에 속한다.

관계형 데이터베이스의 경우 표준 SQL을 지키긴 하지만, 각각의 제품에 특화된 SQL을 사용한다.
예) 오라클 - PL/SQL, SQL Server - T-SQL, MySQL - SQL

### MySQL
대부분의 운영체제와 호환되며, 현재 가장 많이 사용하는 데이터베이스다.
C, C++로 이루어져있다.

* **MyISAM 인덱스 압축** 기술
  * 스토리지 엔진(서버 엔진이 물리적인 데이터를 가져오게 함)
    * MySQL의 대표적인 스토리지 엔진: MyISAM, InnoDB
  * MyISAM의 특징 중 하나는 인덱스를 효율적으로 압축하는 것이다.
* **B-Tree 기반의 인덱스**
  * 인덱스 저장 방식 중 하나
    * B-Tree 인덱스, Hash 인덱스, Fractal 인덱스 등이 있다.
  * B-Tree (Balanced Tree)
    * 이진트리의 확장, N개의 자식을 가질 수 있다.
  * 인덱스 키를 기반으로 항상 정렬된 상태를 유지한다.
* **스레드 기반의 메모리 할당** 시스템
* 매우 **빠른 조인**
* 최대 **64개의 인덱스** 제공
* **대용량 데이터베이스**를 위해 설계됨

#### MySQL 스토리지 엔진 아키텍처
![MySQL 스토리지 엔진 아키텍처](4.4장%20데이터베이스의%20종류/mysql.png)

MySQL은 크게 두 가지 엔진이 존재한다.
* **서버 엔진**
  - 커넥터 API 및 서비스 계층을 통해 클라이언트의 요청을 받고 SQL문들을 처리한다.
  - DB가 SQL문들을 이해할 수 있도록 쿼리를 파싱하고 물리적 저장장치와 통신한다.
  - 디스크와 직접적인 접근을 제외한 대부분의 역할을 수행한다.

* **스토리지 엔진**
  - 서버 엔진이 필요한 데이터를 물리적인 장치에서 가져온다.
  - SQL문 자체를 분석하거나 최적화하고 데이터를 읽어오는 부분을 맡아 수행한다.
  - InnoDB, MyISAM 등 ..

MySQL에서 서버엔진은 하나지만 **스토리지 엔진은 여러 개**를 동시에 사용할 수 있고, 테이블마다 해당 테이블이 사용할 스토리지 엔진을 지정하면 이후 테이블의 모든 읽기 작업이나 변경 작업은 해당 스토리지 엔진이 처리하므로 상황에 맞는 스토리지 엔진을 선택해야 한다.

MySQL은 **모듈식 아키텍처**로 쉽게 스토리지 엔진을 바꿀 수 있다.
또한 데이터 웨어하우징, 트랜잭션 처리, 고가용성 처리에 강점을 가지고 있다.

* 데이터 웨어하우스
  * 여러 소스로부터 가져온 많은 양의 데이터를 통합 및 저장하고, 이러한 데이터를 분석 및 보고하는 데 사용되는 데이터 관리 시스템이다.
* 고가용성 (High Availability)
  * IT 시스템이 장애 및 중단되는 경우를 제거하거나 최소화하여 거의 100% 상시 액세스 가능하고 신뢰성을 유지하는 능력

MySQL은 **쿼리 캐시**를 지원하기 때문에 입력된 쿼리 문에 대한 전체 결과 집합을 저장한다.
이러한 특성때문에 사용자가 작성한 쿼리가 캐시에 있는 쿼리와 동일하다면, 구문 분석, 최적화 및 실행을 건너뛰고 캐시의 출력만 표시한다.

### PostgreSQL
MySQL 다음으로 개발자가 선호하는 데이터베이스 기술이다.
객체 관계형 데이터베이스 시스템이다. (ODBMS)

* **ACID** 규정 완벽 준수
  * MySQL의 스토리지 엔진 중 MyISAM은 지원하지 않음
* **다중 버전 동시성 제어 (MVCC)** 제공
  * MVCC
    * 동시에 여러 트랜잭션이 수행되는 환경에서 각 트랜잭션에게 쿼리 수행 시점의 데이터를 제공하여 읽기 일관성 보장
    * Read/Write 간의 충돌 및 lock을 방지하여 동시성 높임
    * 모든 MVCC의 기본 원리는 트랜잭션이 시작된 시점의 Transaction ID와 같거나 작은 Transacion ID를 가지는 데이터를 읽는 것
  * PostgreSQL의 MVCC
    * 각 버전 별 새로운 튜플을 생성하고 이들의 Transaction ID를 기반으로 판단
    * 이 과정 속에서 어디에도 참조되지 않는 튜플(Dead tuple) 생성됨
    * 이로 인해 PostgreSQL은 Garbage Collector인 **VACCUM** 이 존재한다는 특징을 가짐
* **JSON, XML** 등 다양한 데이터 타입 **지원**
  * `->`, `->>`, `#>` 등의 JSON 관련 함수와 연산자를 통해 조회 가능
* 트리 뿐만 아니라 표현식 인덱스, 부분 인덱스 및 해시 인덱스 등의 **고급 인덱싱 기능** 제공
* **멀티 프로세스**로 동작
* **효율적인 백업 및 복구** 기능
* 최대 테이블 크기: 32TB
* 로깅, 접근 제어, 중첩된 트랜잭션

등의 기능을 가지고 있다.

### MySQL vs PostgreSQL
* MySQL
  * 데이터 읽기 우세
* PostgreSQL
  * 데이터 쓰기 우세
  * 복잡한 트랜잭션 처리 우세

## NoSQL(Not only SQL) 데이터베이스
SQL을 사용하지 않는 데이터베이스를 말한다.

MongoDB, redis가 NoSQL에 속한다.

### MongoDB
JSON을 통해 데이터에 접근할 수 있고, Binary JSON(BSON)의 형태로 데이터가 저장된다.
기본 스토리지 엔진은 WiredTiger 엔진이며, 키 - 값 데이터 모델에서 확장된 도큐먼트 기반의 데이터베이스다.

* 뛰어난 **확장성**
* 높은 **빅데이터 저장** 성능
* **고가용성**, **샤딩**, **레플리카셋** 지원
  * 샤딩 (Sharding)
    * 데이터를 조각내 분산 저장하는 데이터 처리 기법
    * 즉, 일괄적 관리가 힘든 거대 데이터베이스를 작게 나눠서 저장하고 관리하는 방법
  * 레플리카셋 (Replica Set)
    * 고가용성 환경을 위해 필요한 기술로, 동일한 데이터 세트를 유지 관리하는 프로세스 그룹
* **정해진 스키마가 없음**
  * 다양한 도메인의 데이터베이스를 기반으로 분석, 로깅의 구현에 강점
* 도큐먼트 생성 시마다 유니크한 **ObjectID 생성(기본키)**
  * 타입스탬프(4바이트) + 랜덤 값(5바이트) + 카운터(3바이트)

### redis
인메모리 데이터베이스(디스크가 아닌 주 메모리에 모든 데이터를 보유하고 있는 데이터베이스)이자
키 - 값 데이터 모델 기반의 데이터베이스다.

기본 데이터 타입은 string이며 최대 512MB까지 저장 가능하다.
셋(set), 해시(hash) 등을 지원한다.

redis 사용 예제
* **캐싱 계층**
* 단순한 키 - 값이 필요한 **세션 정보 관리**
* 정렬된 셋(Sorted Set)를 통해 **실시간 순위표** 서비스
* pub/sub 기능을 통한 **채팅 시스템**
  * pub/sub
    * Message Queue 통신 방법 중 하나
    * pub(Publisher): 특정 메세지를 구독자에게 발행
    * sub(Subscriber): 구독한 topic에 대하여, publisher의 메세지를 받음
    * Redis pub/sub은 메시지를 저장하지 않기 때문에, 메세지 저장/수신확인이 필요하지 않은 경우에 사용하면 좋다.
  ![pub/sub](4.4장%20데이터베이스의%20종류/pub-sub.png)

https://jaehoney.tistory.com/31
https://techblog.woowahan.com/9478/
https://lucas-owner.tistory.com/60