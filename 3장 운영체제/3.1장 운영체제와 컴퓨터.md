# 3.1장 운영체제와 컴퓨터

## 3.1.1 운영체제의 역할과 구조

### 운영체제의 역할

1. **CPU 스케쥴링과 프로세스 관리** : CPU소유권을 어떤 프로세스에 할당할지, 프로세스의 생성과 삭제, 자원 할당 및 반환 관리
2. **메모리 관리** : 한정된 메모리를 어떤 프로세스에 얼만큼 할당할지 관리
3. **디스크 파일 관리** : 디스크 파일을 어떠한 방법으로 보관할지 관리
4. **I/O 디바이스 관리** : I/O 디바이스들인 마우스, 키보드와 컴퓨터 간에 데이터를 주고받는 것을 관리

### 운영체제의 구조
<img src="https://github.com/user-attachments/assets/167e83a9-3847-4000-8d28-86d2a696e2e2" width="500px" />


### GUI / CUI

- **GUI** : 사용자가 전자장치와 상호작용 할 수 있도록 하는 사용자 인터페이스의 형태
- **CUI** : 그래픽이 아닌 명령어로 처리하는 인터페이스 (ex. 리눅스)

### 시스템콜

: 운영체제가 **`커널`에 접근하기 위한 인터페이스**

유저 프로그램이 운영체제 서비스를 받기 위해 **커널 함수를 호출**할 때 사용

유저 프로그램이 I/O 요청으로 **`트랩(Trap)`**을 발동하면 올바른 요청인지 확인한 후, **`유저 모드`**가 **`시스템콜`**을 통해 **`커널 모드`**로 변환되어 실행

<img src="https://github.com/user-attachments/assets/d18e8010-9f0a-40be-80da-d074091b6e27" width="700px" />


**modeBit**

시스템콜이 작동될 때, modebit를 참고해서 유저 모드와 커널 모드를 구분한다.

<img src="https://github.com/user-attachments/assets/7c432504-fe11-47ad-b60c-95d24153ec89" width="700px" />

### 커널

: 시스템콜 인터페이스를 제공한다. 

보안, 메모리, 프로세스, 파일시스템, I/O디바이스 , I/O요청관리 등 운영체제의 중추적인 역할을 한다.

- **유저 모드** : 접근 영역을 제한적으로 두어 컴퓨터 자원에 함부러 침범할 수 없는 모드
- **커널 모드** : 모든 컴퓨터 자원에 접근할 수 있는 모드

### 드라이버

: 하드웨어를 제어하기위한 소프트웨어

## 3.1.2 컴퓨터의 요소

### CPU **(Central Processing Unit)**

: 제어장치, 레지스터, 산술논리연산장치로 구성

인터럽트에 의해 단순히 **메모리에 존재하는 명령어를 해석해서 실행**

- 제어장치 **(CU, Control Unit)**
    - 프로세스 조작을 지시하는 COU의 한 부품
    - 입출력 간 통신 제어, 명령어를 읽고 해석하며 데이터 처리를 위한 순서 결정
- 레지스터
    - CPU 내부의 매우 빠른 임시기억장치
    - CPU와 직접 연결되어있어 연산속도가 메모리보다 수십배~수백배까지 빠름
    - CPU는 자체적으로 데이터를 저장할 수 없어서 레지스터를 거쳐 데이터 전달
- 산술논리연산장치 **(ALU, Arithmetic Logic Unit)**
    - 덧셈, 뺄셈 같은 두 숫자의 산술 연산과 배타적 논리합, 논리곱 같은 논리 연산을 계산하는 디지털 회로

**CPU에서의 연산 처리**

<img src="https://github.com/user-attachments/assets/d4b57eb8-72b7-4eb4-bf82-812465be3a0d" width="700px" />


1. 제어장치가 메모리에 계산할 값 로드, 또한 레지스터에도 로드
2. 제어장치가 레지스터에 있는 값을 계산하라고 산술논리연산장치에 명령
3. 제어장치가 계산된 값을 다시 '레지스터에서 메모리로' 계산한 값을 저장

### 인터럽트

: 어떤 신호가 들어왔을 때 **CPU를 잠깐 정지**시키는 것

키보드, 마우스 등 I/O 디바이스로 인한 인터럽트, 산술연산에서의 인터럽트, 프로세스 오류 등으로 발생

- 현재 수행중인 프로그램을 잠깐 멈추고 **상태 레지스터**와 **프로그램 카운터**를 저장
- 인터럽트 핸들러 함수가 모여있는 인터럽트 벡터로 가서 인터럽트 핸들러 함수 실행
- 인터럽트 간 우선순위에 따라 실행됨

**하드웨어 인터럽트**

: **I/O 디바이스**에서 발생하는 인터럽트 (키보드 연결, 마우스 연결 등)

**소프트웨어 인터럽트 (`Trap`)**

: 프로세스가 **시스템콜을 호출**할 때 발동

ex. 존재하지 않는 메모리에 접근, 0으로 나누기

### DMA 컨트롤러

: I/O 디바이스가 **메모리에 직접 접근**할 수 있도록 하는 하드웨어 장치

CPU에만 너무 많은 인터럽트 요청이 들어오기 때문에 **CPU 부하를 막아주는** 보조 일꾼 역할

하나의 작업을 CPU와 DMA컨트롤러가 동시에 하는 것을 방지

### 메모리

: 메모리는 전자회로에서 데이터나 상태, 명령어 등을 **기록하는 장치**

- RAM(Random Access Memory) : 주기억장치
- HDD, SDD : 보조기억장치

### 타이머

: 몇 초 안에 작업이 끝나야한다는 것을 정하고 특정 프로그램에 시간 제한을 거는 역할

### 디바이스 컨트롤러

: 컴퓨터와 연결되어 있는 I/O 디바이스들의 작은 CPU
